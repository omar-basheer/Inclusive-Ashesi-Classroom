{"ast":null,"code":"export const handleLogin = async (e, email, password, login, navigate) => {\n  e.preventDefault();\n  const isValidEmail = email => {\n    // Email regex pattern: firstname.lastname@ashesi.edu.gh\n    const emailRegex = /^[a-zA-Z]+[.][a-zA-Z]+@ashesi\\.edu\\.gh$/;\n    return emailRegex.test(email);\n  };\n  try {\n    const response = await fetch('http://localhost:8080/api/students/login/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    if (!response.ok) {\n      console.log(\"login request error: login failed\");\n      return;\n    }\n    console.log('retrieving token...');\n    const data = await response.json();\n    const {\n      token,\n      student_id,\n      first_name,\n      last_name,\n      student_email\n    } = data;\n    if (token) {\n      login(token, {\n        student_id,\n        first_name,\n        last_name,\n        student_email\n      });\n      navigate('/Dashboard');\n    } else {\n      navigate('/Login');\n    }\n  } catch (error) {\n    console.error('An error occurred during login:', error);\n  }\n};\nexport const handleSignUp = async (e, student_id, firstName, lastName, email, password, confirmPassword, navigate) => {\n  e.preventDefault();\n  if (password !== confirmPassword) {\n    // Display an error message or handle the mismatch\n    console.error('Passwords do not match!');\n    return;\n  }\n  console.log('making api call...');\n  try {\n    const response = await fetch('http://localhost:8080/api/students/signup/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        student_id: student_id,\n        first_name: firstName,\n        last_name: lastName,\n        email: email,\n        password: password\n      })\n    });\n    const data = await response.json();\n    console.log(data.data);\n    if (response.ok) {\n      if (response.status == 201) {\n        navigate('/Screening');\n      } else {\n        console.error('Unexpected status code:', response.status);\n      }\n    } else {\n      // Display an error message or handle the failure\n      console.error('Registration failed:', data.message);\n    }\n  } catch (error) {\n    console.error('Error during registration:', error.message);\n  }\n};","map":{"version":3,"names":["handleLogin","e","email","password","login","navigate","preventDefault","isValidEmail","emailRegex","test","response","fetch","method","headers","body","JSON","stringify","ok","console","log","data","json","token","student_id","first_name","last_name","student_email","error","handleSignUp","firstName","lastName","confirmPassword","status","message"],"sources":["/Users/admin/Library/CloudStorage/OneDrive-AshesiUniversity/Ashesi University/ashesi_year_3/sem2/software_engineering/IAC/iac-app/iac-react-app/src/services/user_auth.js"],"sourcesContent":["\nexport const handleLogin = async (e, email, password, login, navigate) => {\n    e.preventDefault();\n\n    const isValidEmail = (email) => {\n        // Email regex pattern: firstname.lastname@ashesi.edu.gh\n        const emailRegex = /^[a-zA-Z]+[.][a-zA-Z]+@ashesi\\.edu\\.gh$/;\n        return emailRegex.test(email);\n    }\n\n    try {\n        const response = await fetch('http://localhost:8080/api/students/login/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n\n        if (!response.ok) {\n            console.log(\"login request error: login failed\")\n            return\n        }\n        console.log('retrieving token...')\n        const data = await response.json()\n        const { token, student_id, first_name, last_name, student_email } = data\n\n        if (token) {\n            login(token, { student_id, first_name, last_name, student_email});\n            navigate('/Dashboard');\n        }\n        else {\n            navigate('/Login');\n        }\n    }catch (error) {\n        console.error('An error occurred during login:', error);\n    }\n}\n\nexport const handleSignUp = async (e, student_id, firstName, lastName, email, password, confirmPassword, navigate) => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n        // Display an error message or handle the mismatch\n        console.error('Passwords do not match!');\n        return;\n    }\n\n    console.log('making api call...')\n    try {\n        const response = await fetch('http://localhost:8080/api/students/signup/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                student_id: student_id,\n                first_name: firstName,\n                last_name: lastName,\n                email: email,\n                password: password,\n            }),\n        });\n\n        const data = await response.json();\n        console.log(data.data)\n\n        if (response.ok) {\n            if (response.status == 201){\n                navigate('/Screening');\n            }\n            else{\n                console.error('Unexpected status code:', response.status);\n            }\n            \n        } else {\n            // Display an error message or handle the failure\n            console.error('Registration failed:', data.message);\n        }\n    } catch (error) {\n        console.error('Error during registration:', error.message);\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}