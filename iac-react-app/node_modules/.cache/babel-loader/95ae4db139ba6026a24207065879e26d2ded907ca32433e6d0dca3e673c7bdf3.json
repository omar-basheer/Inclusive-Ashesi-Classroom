{"ast":null,"code":"export const handleLogin = async (e, email, password, login, user, navigate) => {\n  e.preventDefault();\n  const isValidEmail = email => {\n    // Email regex pattern: firstname.lastname@ashesi.edu.gh\n    const emailRegex = /^[a-zA-Z]+[.][a-zA-Z]+@ashesi\\.edu\\.gh$/;\n    return emailRegex.test(email);\n  };\n  console.log('making api call...');\n  try {\n    const response = await fetch('http://localhost:8080/api/students/login/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    if (!response.ok) {\n      console.log(\"login request error: login failed\");\n      return;\n    }\n    console.log('retrieviing token...');\n    const data = await response.json();\n    const {\n      token,\n      user\n    } = data;\n    if (token) {\n      login(token, user);\n      console.log(token);\n      console.log(user);\n      navigate('/Dashboard');\n    } else {\n      navigate('/Login');\n    }\n  } catch (error) {\n    console.error('An error occurred during login:', error);\n  }\n};\nexport const handleSignUp = async (e, student_id, firstName, lastName, email, password, confirmPassword, navigate) => {\n  e.preventDefault();\n  if (password !== confirmPassword) {\n    // Display an error message or handle the mismatch\n    console.error('Passwords do not match!');\n    return;\n  }\n  console.log('making api call...');\n  try {\n    const response = await fetch('http://localhost:8080/api/students/signup/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        student_id: student_id,\n        first_name: firstName,\n        last_name: lastName,\n        email: email,\n        password: password\n      })\n    });\n    const data = await response.json();\n    console.log(data.data);\n    if (response.ok) {\n      if (response.status == 201) {\n        navigate('/Screening');\n      } else {\n        console.error('Unexpected status code:', response.status);\n      }\n    } else {\n      // Display an error message or handle the failure\n      console.error('Registration failed:', data.message);\n    }\n  } catch (error) {\n    console.error('Error during registration:', error.message);\n  }\n};","map":{"version":3,"names":["handleLogin","e","email","password","login","user","navigate","preventDefault","isValidEmail","emailRegex","test","console","log","response","fetch","method","headers","body","JSON","stringify","ok","data","json","token","error","handleSignUp","student_id","firstName","lastName","confirmPassword","first_name","last_name","status","message"],"sources":["/Users/admin/Library/CloudStorage/OneDrive-AshesiUniversity/Ashesi University/ashesi_year_3/sem2/software_engineering/IAC/iac-app/iac-react-app/src/services/user_auth.js"],"sourcesContent":["\nexport const handleLogin = async (e, email, password, login, user, navigate) => {\n    e.preventDefault();\n\n    const isValidEmail = (email) => {\n        // Email regex pattern: firstname.lastname@ashesi.edu.gh\n        const emailRegex = /^[a-zA-Z]+[.][a-zA-Z]+@ashesi\\.edu\\.gh$/;\n        return emailRegex.test(email);\n    }\n\n    console.log('making api call...')\n    try {\n        const response = await fetch('http://localhost:8080/api/students/login/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email, password }),\n        })\n\n        if (!response.ok) {\n            console.log(\"login request error: login failed\")\n            return\n        }\n        console.log('retrieviing token...')\n        const data = await response.json()\n        const { token, user } = data\n\n        if (token) {\n            login(token, user);\n            console.log(token)\n            console.log(user)\n            navigate('/Dashboard');\n        }\n        else {\n            navigate('/Login');\n        }\n    }\n    catch (error) {\n        console.error('An error occurred during login:', error);\n    }\n}\n\nexport const handleSignUp = async (e, student_id, firstName, lastName, email, password, confirmPassword, navigate) => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n        // Display an error message or handle the mismatch\n        console.error('Passwords do not match!');\n        return;\n    }\n\n    console.log('making api call...')\n    try {\n        const response = await fetch('http://localhost:8080/api/students/signup/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                student_id: student_id,\n                first_name: firstName,\n                last_name: lastName,\n                email: email,\n                password: password,\n            }),\n        });\n\n        const data = await response.json();\n        console.log(data.data)\n\n        if (response.ok) {\n            if (response.status == 201){\n                navigate('/Screening');\n            }\n            else{\n                console.error('Unexpected status code:', response.status);\n            }\n            \n        } else {\n            // Display an error message or handle the failure\n            console.error('Registration failed:', data.message);\n        }\n    } catch (error) {\n        console.error('Error during registration:', error.message);\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}